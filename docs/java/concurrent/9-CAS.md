# CAS

CAS （Compare And Swap），也就是自旋锁和乐观锁的实现方式；原理实际很简单，就是用变量的旧值与当前内存的值进行比较，如果比较一致，则任务变量没有发生过变更，则将新值赋给对象；

在多线程场景下，通常使用锁来解决线程安全问题，比如`Synchronized`  ，但是`Synchronized`是重量级排它锁，会伴随频繁的线程上下文切换，而造成性能损耗；所以针对一些简单的操作场景，比如自增，通常采用CAS操作；

CAS 是是利用CPU指令实现的原子操作，JAVA中的相关方法入口在 `sun.misc.Unsafe` 类中；在JUC包下有广泛使用，尤其是atomic报下；

CAS存在的问题：ABA问题，比如一个值 A 变更为 B，之后又从 B 变更为 A，在这个场景下，CAS 会认为变量没有发生变更；

